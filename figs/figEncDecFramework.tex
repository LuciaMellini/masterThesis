\begin{figure}
    \centering
    \begin{tikzpicture}[scale=1.2, every node/.style={font=\small}]
        % Define styles
            \tikzstyle{node}=[circle, draw, fill=white, minimum size=4pt, inner sep=0.5pt]
            \tikzstyle{main_node}=[circle, draw, fill=red!50, minimum size=6pt, inner sep=0.5pt]
            \tikzstyle{arrow}=[->, thick, dashed]

            % First graph with rectangle
            \begin{scope}[xshift=-3.5cm]
            
                \node[node] (A) at (0.7,1) {};
                \node[node] (B) at (0,0.5) {};
                \node[node] (C) at (0.2,-0.9) {};
                \node[node] (D) at (2,0.5) {};
                \node[main_node, label=above:$u$] (U) at (1.2,0) {};
                \node[node] (V) at (2,-0.5) {};
            
            % Edges in the network
                \draw (A) -- (B) -- (U) -- (C) -- (A);
                \draw (B) -- (C);
                \draw (A) -- (D);
                \draw (U) -- (D);
                \draw (U) -- (V);
                \draw (D) -- (V);
            \end{scope}

            % Embedding representation
            \node[rectangle, fill=black!10, minimum width=0.2cm, minimum height=2.85cm] (embedding) at (0.8,0) {};
                        \foreach \y in {-0.9,-0.6,-0.3,0,0.3,0.6,0.9} {
                            \draw[white] (0.65,\y) -- (0.95,\y);
                        }
            \node[below=0.1cm of embedding] {$z_u$};

            % Arrows
            \draw[arrow] (U) -- node[above, align=center] {encode\\ node} (embedding.west);
            \draw[arrow] (embedding.east) -- node[above, align=center] {decode\\ neighbourhood} (4,0);

            % Decoded neighborhood (smaller version) with rectangle
            \begin{scope}[xshift=7cm,scale=0.8]
                \node[draw, rounded corners, minimum width=2.6cm, minimum height=2cm] at (-2.1,0) {};
                \node[node] (A2) at (-2.5,0.8) {};
                \node[node] (B2) at (-3,0.4) {};
                \node[node] (C2) at (-2.8,-0.7) {};
                \node[node] (D2) at (-1.5,0.4) {};
                \node[main_node, label=above:$u$] (U2) at (-2.1,0) {};
                \node[node] (V2) at (-1.5,-0.4) {};
                
                \draw (A2) -- (B2) -- (U2) -- (C2);
                \draw (B2) -- (C2);
                \draw (A2) -- (D2);
                \draw (U2) -- (D2);
                \draw (U2) -- (V2);
                \draw (D2) -- (V2);
            \end{scope}
    \end{tikzpicture}
    \caption{Overview of the encoder-decoder framework}
    \label{fig:encDecFramework}
\end{figure}